// src/firebase/config.js
import { initializeApp } from "firebase/app";
import { getFirestore } from "firebase/firestore";
import { getAuth } from "firebase/auth";

const firebaseConfig = {
  apiKey: "SUA_API_KEY",
  authDomain: "SEU_AUTH_DOMAIN",
  projectId: "SEU_PROJECT_ID",
  storageBucket: "SEU_STORAGE_BUCKET",
  messagingSenderId: "SEU_MESSAGING_SENDER_ID",
  appId: "SEU_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

export { db, auth };


// src/components/Importacoes.jsx
import React, { useState, useEffect } from 'react';
import { db } from '../firebase/config';
import { collection, addDoc, getDocs } from 'firebase/firestore';

const Importacoes = () => {
  const [produtos, setProdutos] = useState([]);
  const [form, setForm] = useState({ nome: '', custo: '', venda: '', status: 'Estoque' });

  const fetchProdutos = async () => {
    const querySnapshot = await getDocs(collection(db, "importacoes"));
    const data = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
    setProdutos(data);
  };

  useEffect(() => {
    fetchProdutos();
  }, []);

  const handleSubmit = async (e) => {
    e.preventDefault();
    const lucro = parseFloat(form.venda) - parseFloat(form.custo);
    await addDoc(collection(db, "importacoes"), { ...form, lucro });
    fetchProdutos();
  };

  return (
    <div>
      <h2>Gestão de Importações</h2>
      <form onSubmit={handleSubmit}>
        {/* Campos de entrada */}
        <input type="text" placeholder="Nome" value={form.nome} onChange={e => setForm({ ...form, nome: e.target.value })} />
        <input type="number" placeholder="Custo" value={form.custo} onChange={e => setForm({ ...form, custo: e.target.value })} />
        <input type="number" placeholder="Venda" value={form.venda} onChange={e => setForm({ ...form, venda: e.target.value })} />
        <select value={form.status} onChange={e => setForm({ ...form, status: e.target.value })}>
          <option value="Estoque">Estoque</option>
          <option value="Vendido">Vendido</option>
        </select>
        <button type="submit">Adicionar Produto</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>Custo</th>
            <th>Venda</th>
            <th>Lucro</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {produtos.map(produto => (
            <tr key={produto.id}>
              <td>{produto.nome}</td>
              <td>{produto.custo}</td>
              <td>{produto.venda}</td>
              <td>{produto.lucro}</td>
              <td>{produto.status}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
};

export default Importacoes;


// src/components/Ativvo.jsx
import React, { useState, useEffect } from 'react';
import { db } from '../firebase/config';
import { collection, addDoc, getDocs } from 'firebase/firestore';

const Ativvo = () => {
  const [vendas, setVendas] = useState([]);
  const [form, setForm] = useState({ cliente: '', plano: 'Mensal', valor: '', data: '' });

  const fetchVendas = async () => {
    const querySnapshot = await getDocs(collection(db, "ativvo"));
    const data = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
    setVendas(data);
  };

  useEffect(() => {
    fetchVendas();
  }, []);

  const handleSubmit = async (e) => {
    e.preventDefault();
    await addDoc(collection(db, "ativvo"), form);
    fetchVendas();
  };

  return (
    <div>
      <h2>Registro de Vendas - Ativvo</h2>
      <form onSubmit={handleSubmit}>
        <input type="text" placeholder="Cliente" value={form.cliente} onChange={e => setForm({ ...form, cliente: e.target.value })} />
        <input type="number" placeholder="Valor" value={form.valor} onChange={e => setForm({ ...form, valor: e.target.value })} />
        <input type="date" value={form.data} onChange={e => setForm({ ...form, data: e.target.value })} />
        <button type="submit">Adicionar Venda</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Plano</th>
            <th>Valor</th>
            <th>Data</th>
          </tr>
        </thead>
        <tbody>
          {vendas.map(venda => (
            <tr key={venda.id}>
              <td>{venda.cliente}</td>
              <td>{venda.plano}</td>
              <td>{venda.valor}</td>
              <td>{venda.data}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
};

export default Ativvo;


// src/components/Lucros.jsx
import React, { useEffect, useState } from 'react';
import { db } from '../firebase/config';
import { collection, getDocs } from 'firebase/firestore';
import { Bar } from 'react-chartjs-2';

const Lucros = () => {
  const [dados, setDados] = useState({ labels: [], datasets: [] });

  const fetchLucros = async () => {
    const querySnapshot = await getDocs(collection(db, "importacoes"));
    const data = querySnapshot.docs.map(doc => doc.data());
    const labels = data.map(item => item.nome);
    const lucros = data.map(item => item.lucro);
    setDados({
      labels,
      datasets: [
        {
          label: 'Lucro por Produto',
          data: lucros,
          backgroundColor: 'rgba(75,192,192,0.6)',
        },
      ],
    });
  };

  useEffect(() => {
    fetchLucros();
  }, []);

  return (
    <div>
      <h2>Análise de Lucros</h2>
      <Bar data={dados} />
    </div>
  );
};

export default Lucros;


// src/components/SpotifyPlayer.jsx
import React, { useState } from 'react';

const SpotifyPlayer = () => {
  const [url, setUrl] = useState('');
  const [embedUrl, setEmbedUrl] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    const regex = /playlist\/([a-zA-Z0-9]+)\??/;
    const match = url.match(regex);
    if (match && match[1]) {
      setEmbedUrl(`https://open.spotify.com/embed/playlist/${match[1]}`);
    }
  };

  return (
    <div>
      <h2>Player Spotify</h2>
      <form onSubmit={handleSubmit}>
        <input type="text" placeholder="URL da Playlist" value={url} onChange={e => setUrl(e.target.value)} />
        <button type="submit">Adicionar Playlist</button>
      </form>
      {embedUrl && (
        <iframe
          src={embedUrl}
          width="300"
          height="380"
          frameBorder="0"
          allow="encrypted-media"
          title="Spotify Player"
        ></iframe>
      )}
    </div>
  );
};

export default SpotifyPlayer;


// src/App.jsx
import React from 'react';
import Importacoes from './components/Importacoes';
import Ativvo from './components/Ativvo';
import Lucros from './components/Lucros';
import SpotifyPlayer from './components/SpotifyPlayer';

const App = () => {
  return (
    <div>
      <h1>Painel de Gestão - Ativvo</h1>
      <nav>
        <ul>
          <li><a href="#importacoes">Importações</a></li>
          <li><a href="#ativvo">Vendas</a></li>
          <li><a href="#lucros">Lucros</a></li>
          <li><a href="#spotify">Spotify</a></li>
        </ul>
      </nav>
      <main>
        <div id="importacoes"><Importacoes /></div>
        <div id="ativvo"><Ativvo /></div>
        <div id="lucros"><Lucros /></div>
        <div id="spotify"><SpotifyPlayer /></div>
      </main>
    </div>
  );
};

export default App;

